{% extends 'base.html.twig' %}

{% block title %}Facture n°{{ invoice.numInvoice }} {% endblock %}

{% block body %}
	<div class="container-head-invoice">
		<img src="{{ asset('/build/images/main.623ca7c1.svg') }}" alt="logo de perle do" class="logo-header"/>
		<h2>Facture n°
			F{{ invoice.numInvoice }}</h2>
		    <p>Date: {{ invoice.date|date('d/m/Y') }}</p>
	</div>

	<div class="container-name-invoice">
		<div class="container-society">
			<ul>
				<li>
					<h3 class="society">Perle DO</h3>
				</li>
				<li>SAS au capital de 1 000 €</li>
				<li>75-77 avenue Victor Hugo</li>
				<li>69160 Tassin La Demi-Lune</li>
				<li>Siret : 978 254 878 00017</li>
				<li>N° TVA : FR61978254878</li>
			</ul>
		</div>
		<ul>
			<li>{{ invoice.customer.lastname }} {{ invoice.customer.firstname }}</li>
			<li>{{ invoice.customer.adress }}</li>
			<li>{{ invoice.customer.zipcode }}
				{{ invoice.customer.city }}</li>
			<li>C{{ invoice.customer.id }}</li>
		</ul>
	</div>

	<table role="grid" class="table-invoice">
		<thead>
			<tr class="thead">
				<th scope="col">Référence</th>
				<th scope="col">Nom du produit</th>
				<th scope="col">Prix Unitaire</th>
				<th scope="col">Quantité</th>
				<th scope="col">Montant TTC</th>
			</tr>
		</thead>
		<tbody>
			{% set sum = 0 %}
			{% for product in products %}
				{% set sum = sum + product.product.price * product.quantity %}
				<tr>
					<td>P{{ product.product.id }}</td>
					<td>{{ product.product.name }}</td>
					<td>{{ product.product.price }}</td>
					<td>{{ product.quantity }}</td>
					<td>{{ product.product.price * product.quantity }}</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
	<div class="container-name-invoice">
		<div class="container-society">
			<p>Echéance :
				{{ invoice.date|date('d/m/Y') }}</p>
			<p>Règlement :
				{{ invoice.payementType }}</p>
		</div>
		<div class"total-invoice">
			<ul>
				<li>Sous-Total : {{ sum }}
					€</li>
				<li>Remise :
					{{ invoice.discount *100 }}
					%
				</li>

				<li>
					<strong class="invoice-font-size">Total :
						{{ invoice.total }}
						€</strong>
				</li>
				<li>Dont TVA :
					{{ (invoice.total - ( invoice.total / 1.2))|number_format(2) }}</li>
			</ul>
		</div>
	</div>

    <a href="{{ path('app_invoice_index') }}">back to list</a>
    </div>
{% endblock %}
